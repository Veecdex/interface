<!doctype html>
<html lang="en">
<head>
  <!-- Firebase SDKs -->
<script type="module">
  // Import Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  import { getFirestore, setDoc, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  const firebaseConfig = {
        apiKey: "AIzaSyAyDac2t2GrNFAPeYq37QKCSulM5_fkcGg",
        authDomain: "wiesel-80160.firebaseapp.com",
        projectId: "wiesel-80160",
        storageBucket: "wiesel-80160.firebasestorage.app",
        messagingSenderId: "632126721223",
        appId: "1:632126721223:web:7e1057a7d02a65ef5542e2",
        measurementId: "G-Y3VRXF400Q"
      };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  window.firebaseAuth = auth;
  window.firebaseDB = db;
</script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Explore Gifts</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="main.css">


</head>

<body class="bg-white text-gray-800 min-h-screen">
 <!-- PRELOADER -->
<div id="preloader" class="fixed inset-0 flex items-center justify-center bg-yellow-100 z-50">
  <div class="relative flex items-center justify-center">
    <!-- Logo Image (fill in your image path below) -->
    <img 
      src="images/logo.png" 
      alt="Logo" 
      class="w-20 h-20 object-contain rounded-2xl animate-glow"
    >
  </div>
</div>


<script>
  window.addEventListener('load', () => {
    const preloader = document.getElementById('preloader');
    setTimeout(() => {
      preloader.classList.add('fade-out');
    }, 1000); // fades out after 1s
  });
</script>

  <!-- ================= DESKTOP VIEW ================= -->
  <div class="hidden lg:flex h-screen overflow-hidden">

    <!-- LEFT SIDEBAR -->
    <aside class="w-[22%] min-w-[200px] bg-white border-r border-gray-100 shadow-xl flex flex-col justify-between p-6">

      <!-- BRAND HEADER -->
      <div>
        <div class="flex items-center space-x-3 mb-10">
          <img src="images/logo.png" alt="Logo" class="h-[50px] w-[50px] rounded-2xl object-cover shadow-sm">
          <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet">
          <h1 class="text-xl md:text-2xl font-semibold tracking-widest font-[Poppins] uppercase text-[#E2B129] drop-shadow-sm">
            WIESEL
          </h1>
        </div>
    
        <!-- NAVIGATION -->
        <nav class="space-y-3">
            <button 
            class="w-full flex items-center space-x-2 text-gray-500 hover:bg-[#FFF8E1] hover:text-[#E2B129] py-2.5 px-3 rounded-2xl transition-all"
            onclick="window.location.href='usersapp.html'">
            <i data-lucide="home" class="w-4 h-4"></i>
            <span class="font-medium text-[14px]">Home</span>
          </button>
          
        
          <!-- Search Button -->
<button id="openSearchBtn" class="w-full flex items-center space-x-2 text-gray-500 hover:bg-[#FFF8E1] hover:text-[#E2B129] py-2.5 px-3 rounded-2xl transition-all">
  <i data-lucide="search" class="w-4 h-4"></i>
  <span class="text-[14px]">Search</span>
</button>

<!-- Full-Screen Search Page -->
<div id="searchPage" class="fixed inset-0 hidden bg-white dark:bg-[#0b0b0b] z-50 flex flex-col transform translate-y-full transition-transform duration-300 ease-out">
  
  <!-- Header -->
  <div class="flex items-center space-x-3 p-4 border-b border-gray-100 dark:border-gray-800">
    <button id="closeSearchBtn" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition">
      <i data-lucide="arrow-left" class="w-5 h-5 text-gray-600 dark:text-gray-300"></i>
    </button>
    <div class="flex items-center flex-1 space-x-2 bg-gray-100 dark:bg-gray-800 rounded-xl px-3 py-2">
      <i data-lucide="search" class="w-4 h-4 text-gray-400 dark:text-gray-500"></i>
      <input id="searchInput" 
        type="text" 
        placeholder="Search here..." 
        class="bg-transparent outline-none w-full text-gray-700 dark:text-gray-200 text-sm placeholder:text-gray-400"
      >
    </div>
  </div>

  <!-- Suggestions -->
  <div class="p-5 flex-1 overflow-y-auto animate-fadeIn">
    <p class="text-xs text-gray-400 uppercase mb-3">Try searching for</p>
    <div class="flex flex-wrap gap-2">
      <button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition">Tech Gadgets</button>
      <button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition">Healthy Meals</button>
      <button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition">Fitness</button>
      <button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition">Trending</button>
      <button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition">Latest Offers</button>
    </div>
  </div>
</div>

<!-- Lucide Icons -->
<script src="https://unpkg.com/lucide@latest"></script>
<style>
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fadeIn {
    animation: fadeIn 0.4s ease-out forwards;
  }
</style>
<script>
  lucide.createIcons();

  const openBtn = document.getElementById("openSearchBtn");
  const closeBtn = document.getElementById("closeSearchBtn");
  const searchPage = document.getElementById("searchPage");
  const searchInput = document.getElementById("searchInput");

  openBtn.addEventListener("click", () => {
    searchPage.classList.remove("hidden");
    setTimeout(() => {
      searchPage.classList.remove("translate-y-full");
      searchInput.focus();
    }, 10);
  });

  closeBtn.addEventListener("click", () => {
    searchPage.classList.add("translate-y-full");
    setTimeout(() => searchPage.classList.add("hidden"), 300);
  });
</script>

        
<button class="w-full flex items-center space-x-2 bg-[#FFF8E1] text-[#E2B129] py-2.5 px-3 rounded-2xl shadow-sm transition-all">
            <i data-lucide="gift" class="w-4 h-4"></i>
            <span class="text-[14px]">Gifts</span>
          </button>
        
          <button class="w-full flex items-center space-x-2 text-gray-500 hover:bg-[#FFF8E1] hover:text-[#E2B129] py-2.5 px-3 rounded-2xl transition-all">
            <i data-lucide="user" class="w-4 h-4"></i>
            <span class="text-[14px]">Profile</span>
          </button>
        </nav>
        
    
        <!-- MINI TAGLINE ZONE -->
        <div class="mt-10 text-center">
          <div class="flex flex-col items-center space-y-2">
            <i data-lucide="sparkles" class="w-5 h-5 text-[#E2B129] animate-pulse"></i>
            <p class="text-[13px] text-gray-600 leading-tight font-medium">
              Share joy, spread smiles, <br> and make gifting effortless âœ¨
            </p>
          </div>
        </div>
      </div>
    
      <!-- USER INFO -->
      <div class="mt-auto mb-[5px] bg-[#f9f9f9] p-4 rounded-2xl shadow-sm">
        <div class="flex items-center space-x-3">
          <div id="user-initials" class="w-8 h-8 flex items-center justify-center rounded-full bg-[#E2B129] text-white font-semibold text-sm">
            OM
          </div>
          <div>
            <h5 id="user-fullname" class="font-medium text-gray-700 text-sm">User Name</h5>
            <p id="user-joined" class="text-xs text-gray-500">Joined Month Year</p>
          </div>
        </div>
    
        <button id="logoutBtn"
          class="w-full bg-[#E2B129] hover:bg-[#C1991D] text-white text-[13px] font-medium py-2 mt-3 rounded-xl transition-all">
          Logout
        </button>
      </div>
    
      <!-- FIREBASE SCRIPT -->
      <script type="module">
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
    
        const auth = window.firebaseAuth;
        const db = window.firebaseDB;
    
        const initialsDiv = document.getElementById('user-initials');
        const fullnameEl = document.getElementById('user-fullname');
        const joinedEl = document.getElementById('user-joined');
        const logoutBtn = document.getElementById('logoutBtn');
    
        function formatDate(dateString) {
          const date = new Date(dateString);
          return date.toLocaleString('en-US', { month: 'long', year: 'numeric' });
        }
    
        onAuthStateChanged(auth, async (user) => {
          if (user) {
            const docRef = doc(db, "users", user.uid);
            const docSnap = await getDoc(docRef);
            if (docSnap.exists()) {
              const userData = docSnap.data();
              const firstName = userData.firstName || "";
              const lastName = userData.lastName || "";
              const joinedDate = userData.createdAt || new Date().toISOString();
              const initials = `${firstName.charAt(0)}${lastName.charAt(0)}`.toUpperCase();
              initialsDiv.textContent = initials;
              fullnameEl.textContent = `${firstName} ${lastName}`;
              joinedEl.textContent = `Joined ${formatDate(joinedDate)}`;
            }
          } else {
            window.location.href = "signup.html";
          }
        });
    
        logoutBtn.addEventListener('click', async () => {
          try {
            await signOut(auth);
            window.location.href = "signup.html";
          } catch (error) {
            console.error("Logout failed:", error);
          }
        });
    
        lucide.createIcons();
      </script>
    </aside>
    

    <!-- RIGHT MAIN CONTENT -->
    <div class="flex-1 bg-yellow-15 main-desktop-wrapper">
        <div class="main-desktop-box">
          <div class="main-desktop-scroll">
      
          <header class="flex flex-col lg:flex-row items-start lg:items-center justify-between mb-4 gap-3">
            <!-- Left: User Info -->
            <div class="flex items-center space-x-2.5">
              <!-- PROFILE IMAGE -->
              <img 
                id="profileImageDesktop"
                src="images/about-01.png"
                alt="User"
                class="w-12 h-12 rounded-full object-cover border border-gray-200 shadow-sm cursor-pointer"
              />
              <input type="file" id="fileInput" accept="image/*" class="hidden">
          
              <div>
                <script type="module">
                  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
                  import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
                  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
                
                  const firebaseConfig = {
                      apiKey: "AIzaSyAyDac2t2GrNFAPeYq37QKCSulM5_fkcGg",
                      authDomain: "wiesel-80160.firebaseapp.com",
                      projectId: "wiesel-80160",
                      storageBucket: "wiesel-80160.firebasestorage.app",
                      messagingSenderId: "632126721223",
                      appId: "1:632126721223:web:7e1057a7d02a65ef5542e2",
                      measurementId: "G-Y3VRXF400Q"
                    };
                
                  // âœ… Initialize Firebase
                  const app = initializeApp(firebaseConfig);
                  const db = getFirestore(app);
                  const auth = getAuth(app);
                
                  // âœ… Select both desktop and mobile image elements
                  const profileImageDesktop = document.getElementById("profileImageDesktop");
                  const profileImageMobile = document.getElementById("profileImageMobile");
                  const fileInput = document.getElementById("fileInput");
                
                  // âœ… Works for both Desktop & Mobile
                  function triggerFileInput() {
                    fileInput.click();
                  }
                
                  // Use pointerdown (handles click and touch)
                  [profileImageDesktop, profileImageMobile].forEach(img => {
                    if (img) {
                      img.addEventListener("pointerdown", e => {
                        e.preventDefault();
                        triggerFileInput();
                      });
                    }
                  });
                
                  // âœ… Compress image (adapts based on device width)
                  function compressImage(file) {
                    return new Promise((resolve, reject) => {
                      const reader = new FileReader();
                      reader.readAsDataURL(file);
                      reader.onload = event => {
                        const img = new Image();
                        img.src = event.target.result;
                        img.onload = () => {
                          const canvas = document.createElement("canvas");
                          const ctx = canvas.getContext("2d");
                
                          const MAX_DIM = window.innerWidth < 768 ? 500 : 800;
                          let width = img.width;
                          let height = img.height;
                
                          if (width > height && width > MAX_DIM) {
                            height *= MAX_DIM / width;
                            width = MAX_DIM;
                          } else if (height > width && height > MAX_DIM) {
                            width *= MAX_DIM / height;
                            height = MAX_DIM;
                          }
                
                          canvas.width = width;
                          canvas.height = height;
                          ctx.drawImage(img, 0, 0, width, height);
                
                          let quality = 0.9;
                          function attemptCompress() {
                            canvas.toBlob(blob => {
                              if (blob.size / 1024 > 500 && quality > 0.1) {
                                quality -= 0.1;
                                attemptCompress();
                              } else {
                                resolve(blob);
                              }
                            }, "image/jpeg", quality);
                          }
                          attemptCompress();
                        };
                        img.onerror = reject;
                      };
                      reader.onerror = reject;
                    });
                  }
                
                  // âœ… Handle upload
                  fileInput.addEventListener("change", async e => {
                    const file = e.target.files[0];
                    if (!file) return;
                
                    try {
                      const compressedBlob = await compressImage(file);
                      const reader = new FileReader();
                      reader.readAsDataURL(compressedBlob);
                      reader.onloadend = async () => {
                        const base64data = reader.result;
                        const user = auth.currentUser;
                        if (!user) {
                          alert("Please log in to update your profile image.");
                          return;
                        }
                
                        await setDoc(doc(db, "users", user.uid), {
                          profileImage: base64data
                        }, { merge: true });
                
                        // âœ… Instantly update both
                        if (profileImageDesktop) profileImageDesktop.src = base64data;
                        if (profileImageMobile) profileImageMobile.src = base64data;
                      };
                    } catch (err) {
                      console.error(err);
                      alert("Failed to upload image. Try a smaller one.");
                    }
                  });
                
                  // âœ… Realtime updates (Desktop + Mobile)
                  onAuthStateChanged(auth, user => {
                    if (user) {
                      const docRef = doc(db, "users", user.uid);
                      onSnapshot(docRef, docSnap => {
                        if (docSnap.exists()) {
                          const data = docSnap.data();
                          if (data.profileImage) {
                            if (profileImageDesktop) profileImageDesktop.src = data.profileImage;
                            if (profileImageMobile) profileImageMobile.src = data.profileImage;
                          }
                        }
                      });
                    }
                  });
                </script>
                <!-- Desktop greeting -->
                <h2 id="greeting-desktop" class="text-[15px] font-semibold text-gray-800 leading-tight">Hey, user ðŸ‘‹</h2>
                <script type="module">
                  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
                  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
                
                  const auth = window.firebaseAuth;
                  const db = window.firebaseDB;
                
                  // Get both greetings (if they exist)
                  const desktopGreeting = document.getElementById('greeting-desktop');
                  const mobileGreeting = document.getElementById('greeting-mobile');
                
                  onAuthStateChanged(auth, async (user) => {
                    if (user) {
                      const docRef = doc(db, "users", user.uid);
                      const docSnap = await getDoc(docRef);
                      if (docSnap.exists()) {
                        const firstName = docSnap.data().firstName;
                        const message = `Hey, ${firstName} ðŸ‘‹`;
                
                        // Update both greetings only if they exist
                        if (desktopGreeting) desktopGreeting.textContent = message;
                        if (mobileGreeting) mobileGreeting.textContent = message;
                      } else {
                        if (desktopGreeting) desktopGreeting.textContent = "Hey, User ðŸ‘‹";
                        if (mobileGreeting) mobileGreeting.textContent = "Hey, User ðŸ‘‹";
                      }
                    } else {
                      window.location.href = "signin.html"; // Redirect if not logged in
                    }
                  });
                </script>
                <p id="joyMessage" class="text-[13px] text-gray-500 transition-opacity duration-500">
                  Ready to share a little joy today?
                </p>
              </div>
            </div>
        
            <!-- Right: Search Bar -->
            <div class="relative w-full lg:w-[250px]">
                <input 
                type="text" 
                id="giftSearchInput"
                placeholder="Search gifts..." 
                class="w-full bg-white border border-yellow-100 rounded-full py-2 pl-9 pr-3 shadow-sm 
                       focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent 
                       placeholder:text-gray-400 text-[13px]"
              />
              
              <svg xmlns="http://www.w3.org/2000/svg" 
              class="w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" 
              fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1110.5 3a7.5 7.5 0 016.15 13.65z" />
            </svg>
            </div>
            <script>
                const searchInput = document.getElementById('giftSearchInput');
                const searchResultsSection = document.getElementById('searchResultsSection');
                const searchResultsGrid = document.getElementById('searchResultsGrid');
                const noResultsMessage = document.getElementById('noResultsMessage');
                
                // Get all gift cards from the page
                const allGiftCards = Array.from(document.querySelectorAll('.gift-grid > div'));
                
                searchInput.addEventListener('keypress', function(e) {
                  if (e.key === 'Enter') {
                    const query = searchInput.value.trim().toLowerCase();
                    searchResultsGrid.innerHTML = ''; // Clear previous results
                    noResultsMessage.classList.add('hidden');
                
                    if (!query) return;
                
                    // Filter cards that match query in title or description
                    const matchedCards = allGiftCards.filter(card => {
                      const title = card.querySelector('h4')?.innerText.toLowerCase() || '';
                      const description = card.querySelector('p')?.innerText.toLowerCase() || '';
                      return title.includes(query) || description.includes(query);
                    });
                
                    if (matchedCards.length === 0) {
                      noResultsMessage.innerText = `Oops! No results for "${searchInput.value}"`;
                      noResultsMessage.classList.remove('hidden');
                    } else {
                      matchedCards.forEach(card => {
                        searchResultsGrid.appendChild(card.cloneNode(true));
                      });
                    }
                
                    searchResultsSection.style.display = 'block';
                    // Optionally scroll to results
                    searchResultsSection.scrollIntoView({ behavior: 'smooth' });
                  }
                });
                </script>
                
          </header>
          

        <!-- MAIN CONTENT -->
        <main class="space-y-8">
<!-- ===== GIFT CATEGORIES (DESKTOP) ===== -->
<section class="mt-6 hidden md:block">
    <div class="flex space-x-3 overflow-x-auto pb-3 no-scrollbar" id="desktopCategories">
      <button class="category-btn active flex items-center space-x-2 flex-shrink-0 bg-[#FFF8E1] text-[#E2B129] font-medium text-sm px-4 py-2 rounded-full border border-[#E2B129]/30 shadow-sm transition-all" data-target="allGifts">
        <i data-lucide="gift" class="w-4 h-4"></i>
        <span>All Gifts</span>
      </button>
      <button class="category-btn flex items-center space-x-2 flex-shrink-0 bg-white text-gray-600 font-medium text-sm px-4 py-2 rounded-full border border-gray-200 shadow-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition-all" data-target="diningGifts">
        <i data-lucide="utensils-crossed" class="w-4 h-4"></i>
        <span>Dining & Nightlife</span>
      </button>
      <button class="category-btn flex items-center space-x-2 flex-shrink-0 bg-white text-gray-600 font-medium text-sm px-4 py-2 rounded-full border border-gray-200 shadow-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition-all" data-target="shoppingGifts">
        <i data-lucide="shopping-bag" class="w-4 h-4"></i>
        <span>Shopping Voucher</span>
      </button>
      <button class="category-btn flex items-center space-x-2 flex-shrink-0 bg-white text-gray-600 font-medium text-sm px-4 py-2 rounded-full border border-gray-200 shadow-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition-all" data-target="spaGifts">
        <i data-lucide="towel" class="w-4 h-4"></i>
        <span>Spa & Wellness</span>
      </button>
      <button class="category-btn flex items-center space-x-2 flex-shrink-0 bg-white text-gray-600 font-medium text-sm px-4 py-2 rounded-full border border-gray-200 shadow-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition-all" data-target="luxuryGifts">
        <i data-lucide="hotel" class="w-4 h-4"></i>
        <span>Luxury Retreat</span>
      </button>
      <button class="category-btn flex items-center space-x-2 flex-shrink-0 bg-white text-gray-600 font-medium text-sm px-4 py-2 rounded-full border border-gray-200 shadow-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition-all" data-target="familyGifts">
        <i data-lucide="users" class="w-4 h-4"></i>
        <span>Family Experience</span>
      </button>
      <button class="category-btn flex items-center space-x-2 flex-shrink-0 bg-white text-gray-600 font-medium text-sm px-4 py-2 rounded-full border border-gray-200 shadow-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition-all" data-target="recreationGifts">
        <i data-lucide="umbrella" class="w-4 h-4"></i>
        <span>Recreation & Leisure</span>
      </button>
    </div>
  </section>
  
<section class="mt-6" id="searchResultsSection" style="display:none;">
  <h3 class="text-sm font-semibold text-gray-800 mb-3">Search Results</h3>
  <h3 id="searchResultTitle" class="text-sm font-semibold text-gray-800 mb-3 hidden"></h3>

<div id="searchPreloader" class="flex justify-center items-center mb-2 hidden">
  <svg class="w-5 h-5 animate-spin text-yellow-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8H4z"></path>
  </svg>
  <span class="ml-2 text-sm text-gray-500">Loading results...</span>
</div>

  
  <div class="gift-grid grid grid-cols-2 md:grid-cols-3 gap-4" id="searchResultsGrid"></div>
  <p id="noResultsMessage" class="text-gray-500 text-sm mt-2 hidden"></p>
</section>

  
  <!-- ====== ALL GIFTS (DEFAULT ACTIVE) ====== -->
  <section class="mt-6 category-section" id="allGifts">
    <div class="flex items-center justify-between mb-3">
      <h3 class="text-sm font-semibold text-gray-800">Trending Gifts</h3>
      <div class="flex items-center space-x-1 cursor-pointer">
        <i data-lucide="flame" class="w-5 h-5 text-[#E2B129] animate-pulse"></i>
        <span class="text-xs font-medium text-[#E2B129]">Hot Picks</span>
      </div>
    </div>
    <div class="gift-grid grid grid-cols-2 md:grid-cols-3 gap-4">
      <!-- SAMPLE CARD -->
      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <span class="absolute top-2 right-3 text-xs font-semibold text-[#E2B129] bg-[#FFF8E1] px-2 py-0.5 rounded-full shadow-sm">â‚¦5,000</span>
        <img src="images/food.jpeg" alt="Chicken Republic Gift" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">MEAL COMBO</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Chicken Republic</p>
        <button class="w-full bg-[#FFF8E1] text-[#E2B129] text-[10px] font-medium py-1 rounded-full border border-[#E2B129]/30 hover:bg-[#E2B129]/10 transition-all">Buy Now</button>
      </div>
      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <span class="absolute top-2 right-3 text-xs font-semibold text-[#E2B129] bg-[#FFF8E1] px-2 py-0.5 rounded-full shadow-sm">â‚¦38,000</span>
        <img src="images/cinema.jpeg" alt="Eko Spa Experience" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">SPA EXPERIENCE</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Eko Hotel & Suites</p>
        <button class="w-full bg-[#FFF8E1] text-[#E2B129] text-[10px] font-medium py-1 rounded-full border border-[#E2B129]/30 hover:bg-[#E2B129]/10 transition-all">
          Buy Now
        </button>
      </div>
  
      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <span class="absolute top-2 right-3 text-xs font-semibold text-[#E2B129] bg-[#FFF8E1] px-2 py-0.5 rounded-full shadow-sm">â‚¦7,500</span>
        <img src="images/about-02.png" alt="Dominoâ€™s Pizza Gift" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">PIZZA NIGHT</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Dominoâ€™s Pizza</p>
        <button class="w-full bg-[#FFF8E1] text-[#E2B129] text-[10px] font-medium py-1 rounded-full border border-[#E2B129]/30 hover:bg-[#E2B129]/10 transition-all">
          Buy Now
        </button>
      </div>
  
      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <span class="absolute top-2 right-3 text-xs font-semibold text-[#E2B129] bg-[#FFF8E1] px-2 py-0.5 rounded-full shadow-sm">â‚¦25,000</span>
        <img src="images/testimonial.png" alt="Justrite Gift" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">SHOPPING VOUCHER</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Justrite Stores</p>
        <button class="w-full bg-[#FFF8E1] text-[#E2B129] text-[10px] font-medium py-1 rounded-full border border-[#E2B129]/30 hover:bg-[#E2B129]/10 transition-all">
          Buy Now
        </button>
      </div>
  
      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <span class="absolute top-2 right-3 text-xs font-semibold text-[#E2B129] bg-[#FFF8E1] px-2 py-0.5 rounded-full shadow-sm">â‚¦30,000</span>
        <img src="images/shopping.jpeg" alt="Spar Gift" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">GROCERY CARD</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Spar Supermarket</p>
        <button class="w-full bg-[#FFF8E1] text-[#E2B129] text-[10px] font-medium py-1 rounded-full border border-[#E2B129]/30 hover:bg-[#E2B129]/10 transition-all">
          Buy Now
        </button>
      </div>
  
      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <span class="absolute top-2 right-3 text-xs font-semibold text-[#E2B129] bg-[#FFF8E1] px-2 py-0.5 rounded-full shadow-sm">â‚¦15,000</span>
        <img src="images/luxury.jpeg" alt="Filmhouse Gift" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">MOVIE EXPERIENCE</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Filmhouse Cinemas</p>
        <button class="w-full bg-[#FFF8E1] text-[#E2B129] text-[10px] font-medium py-1 rounded-full border border-[#E2B129]/30 hover:bg-[#E2B129]/10 transition-all">
          Buy Now
        </button>
      </div>
    </div>
  </section>
  
  <!-- ====== OTHER CATEGORY SECTIONS (HIDDEN BY DEFAULT) ====== -->
  <section class="mt-6 category-section hidden" id="diningGifts">
    <h3 class="text-sm font-semibold text-gray-800 mb-3">Dining & Nightlife</h3>
    <div class="gift-grid grid grid-cols-2 gap-3">
      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <img src="images/pizza.jpg" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">PIZZA NIGHT</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Dominoâ€™s Pizza</p>
      </div>
    </div>
  </section>
  
  <section class="mt-6 category-section hidden" id="shoppingGifts">
    <h3 class="text-sm font-semibold text-gray-800 mb-3">Shopping Vouchers</h3>
    <div class="gift-grid grid grid-cols-2 gap-3">
      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <img src="images/shopping.jpeg" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">SHOPPING VOUCHER</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Justrite Stores</p>
      </div>
    </div>
  </section>
  
  <section class="mt-6 category-section hidden" id="spaGifts">
    <h3 class="text-sm font-semibold text-gray-800 mb-3">Spa & Wellness</h3>
    <div class="gift-grid grid grid-cols-2 gap-3">
      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <img src="images/luxury.jpeg" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">SPA EXPERIENCE</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Eko Hotel</p>
      </div>
    </div>
  </section>
  <div id="searchPreloader" class="flex justify-center items-center mb-2 hidden">
    <svg class="w-5 h-5 animate-spin text-yellow-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8H4z"></path>
    </svg>
    <span class="ml-2 text-sm text-gray-500">Loading results...</span>
  </div>
  
<script>
  lucide.createIcons();

  // === FIX DESKTOP SCROLL FREEZE ===
  function fixDesktopNavigationFreeze() {
    const body = document.body;
    const section = document.getElementById('trendingGiftsSection');
    const grid = section?.querySelector('.gift-grid');

    if (!section || !grid) return;

    if (window.innerWidth >= 1024) {
      // Desktop mode â€” ensure full page scroll freedom
      body.style.overflow = 'auto';
      section.style.overflow = 'visible';
      grid.style.overflow = 'visible';
      grid.style.display = 'grid';
      grid.style.gridTemplateColumns = 'repeat(3, 1fr)';
      section.style.position = 'relative';
      section.style.height = 'auto';
    } else {
      // Mobile mode â€” restore intended scroll behavior
      body.style.overflow = '';
      section.style.overflow = '';
      grid.style.overflow = '';
      grid.style.display = '';
      grid.style.gridTemplateColumns = '';
      section.style.position = '';
      section.style.height = '';
    }
  }

  window.addEventListener('load', fixDesktopNavigationFreeze);
  window.addEventListener('resize', fixDesktopNavigationFreeze);
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const searchInput = document.getElementById('giftSearchInput');
  const searchResultsSection = document.getElementById('searchResultsSection');
  const searchResultsGrid = document.getElementById('searchResultsGrid');
  const noResultsMessage = document.getElementById('noResultsMessage');
  const searchPreloader = document.getElementById('searchPreloader');
  const searchResultTitle = document.getElementById('searchResultTitle');

  const allGiftCards = Array.from(document.querySelectorAll('.category-section .gift-grid > div'));
  const categoryButtons = document.querySelectorAll('.category-btn');
  const categorySections = document.querySelectorAll('.category-section');

  // ===== CATEGORY BUTTONS =====
  categoryButtons.forEach(btn => {
    btn.addEventListener('click', function() {
      const target = btn.dataset.target;

      // Update active states
      categoryButtons.forEach(b => b.classList.remove('active', 'bg-[#FFF8E1]', 'text-[#E2B129]'));
      categoryButtons.forEach(b => b.classList.add('bg-white', 'text-gray-600'));
      btn.classList.add('active', 'bg-[#FFF8E1]', 'text-[#E2B129]');

      // Show correct section
      categorySections.forEach(sec => sec.style.display = (sec.id === target) ? 'block' : 'none');

      // Hide search results
      searchResultsSection.style.display = 'none';
    });
  });

  // ===== SEARCH FUNCTION =====
  searchInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      const query = searchInput.value.trim().toLowerCase();
      searchResultsGrid.innerHTML = '';
      noResultsMessage.classList.add('hidden');
      searchResultTitle.classList.add('hidden');

      if (!query) return;

      // Show preloader
      searchPreloader.classList.remove('hidden');
      searchResultsSection.style.display = 'block';

      setTimeout(() => {
        // Filter cards
        const matchedCards = allGiftCards.filter(card => {
          const title = card.querySelector('h4')?.innerText.toLowerCase() || '';
          const description = card.querySelector('p')?.innerText.toLowerCase() || '';
          const priceText = card.querySelector('span')?.innerText || '';
          const price = priceText.replace(/[â‚¦,]/g, '').trim(); // e.g. "5000"

          // Match query against title, description, or price
          return (
            title.includes(query) ||
            description.includes(query) ||
            price.includes(query.replace(/[â‚¦,]/g, '').trim()) ||
            (query.includes('under') && parseInt(price) <= parseInt(query.replace(/[^0-9]/g, ''))) ||
            (query.includes('below') && parseInt(price) <= parseInt(query.replace(/[^0-9]/g, '')))
          );
        });

        searchPreloader.classList.add('hidden'); // Hide preloader after search completes

        if (matchedCards.length === 0) {
          noResultsMessage.innerText = `Oops! No results for "${searchInput.value}"`;
          noResultsMessage.classList.remove('hidden');
        } else {
          searchResultTitle.innerText = `Results for "${searchInput.value}"`;
          searchResultTitle.classList.remove('hidden');

          matchedCards.forEach(card => searchResultsGrid.appendChild(card.cloneNode(true)));
        }

        // Hide other sections
        categorySections.forEach(sec => sec.style.display = 'none');
        searchResultsSection.scrollIntoView({ behavior: 'smooth' });
      }, 800); // spinner shows for 0.8s
    }
  });

  // ===== CLEAR SEARCH =====
  searchInput.addEventListener('input', function() {
    if (!searchInput.value.trim()) {
      searchResultsSection.style.display = 'none';
      categorySections.forEach(sec => sec.style.display = 'block');
      searchPreloader.classList.add('hidden');
      searchResultTitle.classList.add('hidden');
    }
  });
});

</script>
      </main>
      </div>
    </div>
  </div>
</div>
  <!-- ================= MOBILE VIEW ================= -->
  
  <div class="lg:hidden flex flex-col min-h-screen">
    <div class="flex-1 desktop-frame">
     <!-- HEADER -->
     <header class="flex items-center justify-between px-4 pt-4">
      <div class="flex items-center space-x-2.5">
        <!-- PROFILE IMAGE -->
        <img 
          id="profileImageMobile"
          src="images/about-01.png"
          alt="User"
          class="w-12 h-12 rounded-full object-cover border border-gray-200 shadow-sm cursor-pointer"
        />
        <input type="file" id="fileInput" accept="image/*" class="hidden">
    
        <div>
          <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
            import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
            import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
          
            const firebaseConfig = {
          apiKey: "AIzaSyAyDac2t2GrNFAPeYq37QKCSulM5_fkcGg",
          authDomain: "wiesel-80160.firebaseapp.com",
          projectId: "wiesel-80160",
          storageBucket: "wiesel-80160.firebasestorage.app",
          messagingSenderId: "632126721223",
          appId: "1:632126721223:web:7e1057a7d02a65ef5542e2",
          measurementId: "G-Y3VRXF400Q"
        };
          
            // âœ… Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
            const auth = getAuth(app);
          
            // âœ… Select both desktop and mobile image elements
            const profileImageDesktop = document.getElementById("profileImageDesktop");
            const profileImageMobile = document.getElementById("profileImageMobile");
            const fileInput = document.getElementById("fileInput");
          
            // âœ… Works for both Desktop & Mobile
            function triggerFileInput() {
              fileInput.click();
            }
          
            // Use pointerdown (handles click and touch)
            [profileImageDesktop, profileImageMobile].forEach(img => {
              if (img) {
                img.addEventListener("pointerdown", e => {
                  e.preventDefault();
                  triggerFileInput();
                });
              }
            });
          
            // âœ… Compress image (adapts based on device width)
            function compressImage(file) {
              return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = event => {
                  const img = new Image();
                  img.src = event.target.result;
                  img.onload = () => {
                    const canvas = document.createElement("canvas");
                    const ctx = canvas.getContext("2d");
          
                    const MAX_DIM = window.innerWidth < 768 ? 500 : 800;
                    let width = img.width;
                    let height = img.height;
          
                    if (width > height && width > MAX_DIM) {
                      height *= MAX_DIM / width;
                      width = MAX_DIM;
                    } else if (height > width && height > MAX_DIM) {
                      width *= MAX_DIM / height;
                      height = MAX_DIM;
                    }
          
                    canvas.width = width;
                    canvas.height = height;
                    ctx.drawImage(img, 0, 0, width, height);
          
                    let quality = 0.9;
                    function attemptCompress() {
                      canvas.toBlob(blob => {
                        if (blob.size / 1024 > 500 && quality > 0.1) {
                          quality -= 0.1;
                          attemptCompress();
                        } else {
                          resolve(blob);
                        }
                      }, "image/jpeg", quality);
                    }
                    attemptCompress();
                  };
                  img.onerror = reject;
                };
                reader.onerror = reject;
              });
            }
          
            // âœ… Handle upload
            fileInput.addEventListener("change", async e => {
              const file = e.target.files[0];
              if (!file) return;
          
              try {
                const compressedBlob = await compressImage(file);
                const reader = new FileReader();
                reader.readAsDataURL(compressedBlob);
                reader.onloadend = async () => {
                  const base64data = reader.result;
                  const user = auth.currentUser;
                  if (!user) {
                    alert("Please log in to update your profile image.");
                    return;
                  }
          
                  await setDoc(doc(db, "users", user.uid), {
                    profileImage: base64data
                  }, { merge: true });
          
                  // âœ… Instantly update both
                  if (profileImageDesktop) profileImageDesktop.src = base64data;
                  if (profileImageMobile) profileImageMobile.src = base64data;
                };
              } catch (err) {
                console.error(err);
                alert("Failed to upload image. Try a smaller one.");
              }
            });
          
            // âœ… Realtime updates (Desktop + Mobile)
            onAuthStateChanged(auth, user => {
              if (user) {
                const docRef = doc(db, "users", user.uid);
                onSnapshot(docRef, docSnap => {
                  if (docSnap.exists()) {
                    const data = docSnap.data();
                    if (data.profileImage) {
                      if (profileImageDesktop) profileImageDesktop.src = data.profileImage;
                      if (profileImageMobile) profileImageMobile.src = data.profileImage;
                    }
                  }
                });
              }
            });
          </script>
          <!-- Mobile greeting -->
          <h2 id="greeting-mobile" class="text-[15px] font-semibold text-gray-800 leading-tight">Hey, User ðŸ‘‹</h2>
            <script type="module">
              import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
              import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
            
              const auth = window.firebaseAuth;
              const db = window.firebaseDB;
            

            
              // Get both greetings (if they exist)
              const desktopGreeting = document.getElementById('greeting-desktop');
              const mobileGreeting = document.getElementById('greeting-mobile');
            
              onAuthStateChanged(auth, async (user) => {
                if (user) {
                  const docRef = doc(db, "users", user.uid);
                  const docSnap = await getDoc(docRef);
                  if (docSnap.exists()) {
                    const firstName = docSnap.data().firstName;
                    const message = `Hey, ${firstName} ðŸ‘‹`;
            
                    // Update both greetings only if they exist
                    if (desktopGreeting) desktopGreeting.textContent = message;
                    if (mobileGreeting) mobileGreeting.textContent = message;
                  } else {
                    if (desktopGreeting) desktopGreeting.textContent = "Hey, User ðŸ‘‹";
                    if (mobileGreeting) mobileGreeting.textContent = "Hey, User ðŸ‘‹";
                  }
                } else {
                  window.location.href = "signin.html"; // Redirect if not logged in
                }
              });
            </script>
            
            <p id="joymMessage" class="text-[13px] text-gray-500 transition-opacity duration-500">
              Ready to share a little joy today?
            </p>
            
      
            
          </div>
        </div>
    </header>
 
      <!-- MAIN CONTENT -->
      <main class="flex-1 px-5 py-8 space-y-8">       
  <!-- ===== GIFT SEARCH & CATEGORIES (MOBILE) ===== -->
  <section style="margin-top: -15px;" class=" md:hidden">
    <!-- Search Bar (closer to top) -->
    <div class="flex items-center bg-white rounded-full border border-gray-200 shadow-sm px-3 py-2 mb-2 mx-3 mt-2">
      <i data-lucide="search" class="w-4 h-4 text-gray-400"></i>
      <input 
        type="text" 
        placeholder="Search gifts..." 
        class="flex-1 text-sm text-gray-600 bg-transparent focus:outline-none pl-2"
      />
    </div>
  
    <!-- ===== Scrollable Gift Categories ===== -->
<div class="flex space-x-2 overflow-x-auto pb-2 snap-x snap-mandatory no-scrollbar px-3">
    <button class="category-btn active flex items-center space-x-1 flex-shrink-0 snap-center bg-[#FFF8E1] text-[#E2B129] text-[12px] font-medium px-3 py-1.5 rounded-full border border-[#E2B129]/30 shadow-sm transition-all" data-target="allGift">
      <i data-lucide="gift" class="w-3.5 h-3.5"></i>
      <span>All Gifts</span>
    </button>
  
    <button class="category-btn flex items-center space-x-1 flex-shrink-0 snap-center bg-white text-gray-600 text-[12px] font-medium px-3 py-1.5 rounded-full border border-gray-200 shadow-sm hover:bg-[#FFF8E1] hover:text-[#E2B129]" data-target="dining">
      <i data-lucide="utensils-crossed" class="w-3.5 h-3.5"></i>
      <span>Dining & Nightlife</span>
    </button>
  
    <button class="category-btn flex items-center space-x-1 flex-shrink-0 snap-center bg-white text-gray-600 text-[12px] font-medium px-3 py-1.5 rounded-full border border-gray-200 shadow-sm hover:bg-[#FFF8E1] hover:text-[#E2B129]" data-target="shopping">
      <i data-lucide="shopping-bag" class="w-3.5 h-3.5"></i>
      <span>Shopping</span>
    </button>
  
    <button class="category-btn flex items-center space-x-1 flex-shrink-0 snap-center bg-white text-gray-600 text-[12px] font-medium px-3 py-1.5 rounded-full border border-gray-200 shadow-sm hover:bg-[#FFF8E1] hover:text-[#E2B129]" data-target="luxury">
      <i data-lucide="hotel" class="w-3.5 h-3.5"></i>
      <span>Luxury</span>
    </button>
  
    <button class="category-btn flex items-center space-x-1 flex-shrink-0 snap-center bg-white text-gray-600 text-[12px] font-medium px-3 py-1.5 rounded-full border border-gray-200 shadow-sm hover:bg-[#FFF8E1] hover:text-[#E2B129]" data-target="spa">
      <i data-lucide="spa" class="w-3.5 h-3.5"></i>
      <span>Spa</span>
    </button>
  </div>
  
  <!-- ===== GIFT SECTIONS ===== -->
  
  <!-- All Gifts (Default Visible) -->
  <section id="allGift" class="gift-section mt-6 opacity-100 visible transition-all duration-500">
    <div class="flex items-center justify-between mb-3">
      <h3 class="text-sm font-semibold text-gray-800">Trending Gifts</h3>
      <div class="flex items-center space-x-1 cursor-pointer">
        <i data-lucide="flame" class="w-5 h-5 text-[#E2B129] animate-pulse"></i>
        <span class="text-xs font-medium text-[#E2B129]">Hot Picks</span>
      </div>
    </div>
  
    <div class="grid grid-cols-2 gap-3">
      <!-- Existing gift cards (your current trending cards go here) -->
      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <span class="absolute top-2 right-3 text-xs font-semibold text-[#E2B129] bg-[#FFF8E1] px-2 py-0.5 rounded-full shadow-sm">â‚¦5,000</span>
        <img src="images/food.jpeg" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">MEAL COMBO</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Chicken Republic</p>
        <button class="w-full bg-[#FFF8E1] text-[#E2B129] text-[11px] font-semibold py-1 rounded-full border border-[#E2B129]/30">Buy Now</button>
      </div>

      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <span class="absolute top-2 right-3 text-xs font-semibold text-[#E2B129] bg-[#FFF8E1] px-2 py-0.5 rounded-full shadow-sm">â‚¦9,000</span>
        <img src="images/dining.jpeg" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">DINNER NIGHT</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Sky Lounge</p>
        <button class="w-full bg-[#FFF8E1] text-[#E2B129] text-[11px] font-semibold py-1 rounded-full border border-[#E2B129]/30">Buy Now</button>
      </div>

      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <span class="absolute top-2 right-3 text-xs font-semibold text-[#E2B129] bg-[#FFF8E1] px-2 py-0.5 rounded-full shadow-sm">â‚¦20,000</span>
        <img src="images/shopping.jpeg" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">SHOPPING CARD</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Justrite Stores</p>
        <button class="w-full bg-[#FFF8E1] text-[#E2B129] text-[11px] font-semibold py-1 rounded-full border border-[#E2B129]/30">Buy Now</button>
      </div>

      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <span class="absolute top-2 right-3 text-xs font-semibold text-[#E2B129] bg-[#FFF8E1] px-2 py-0.5 rounded-full shadow-sm">â‚¦40,000</span>
        <img src="images/luxury.jpeg" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">VIP SPA TREAT</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Eko Suites</p>
        <button class="w-full bg-[#FFF8E1] text-[#E2B129] text-[11px]font-semibold py-1 rounded-full border border-[#E2B129]/30">Buy Now</button>
      </div>
    </div>
  </section>
  
  <!-- Dining Section -->
  <section id="dining" class="gift-section mt-6 hidden opacity-0 transition-all duration-500">
    <h3 class="text-sm font-semibold text-gray-800 mb-3">Dining & Nightlife Gifts</h3>
    <div class="grid grid-cols-2 gap-3">
      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <span class="absolute top-2 right-3 text-xs font-semibold text-[#E2B129] bg-[#FFF8E1] px-2 py-0.5 rounded-full shadow-sm">â‚¦9,000</span>
        <img src="images/dining.jpeg" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">DINNER NIGHT</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Sky Lounge</p>
        <button class="w-full bg-[#FFF8E1] text-[#E2B129] text-[11px] font-semibold py-1 rounded-full border border-[#E2B129]/30">Buy Now</button>
      </div>
    </div>
  </section>
  
  <!-- Shopping Section -->
  <section id="shopping" class="gift-section mt-6 hidden opacity-0 transition-all duration-500">
    <h3 class="text-sm font-semibold text-gray-800 mb-3">Shopping Gifts</h3>
    <div class="grid grid-cols-2 gap-3">
      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <span class="absolute top-2 right-3 text-xs font-semibold text-[#E2B129] bg-[#FFF8E1] px-2 py-0.5 rounded-full shadow-sm">â‚¦20,000</span>
        <img src="images/shopping.jpeg" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">SHOPPING CARD</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Justrite Stores</p>
        <button class="w-full bg-[#FFF8E1] text-[#E2B129] text-[11px] font-semibold py-1 rounded-full border border-[#E2B129]/30">Buy Now</button>
      </div>
    </div>
  </section>
  
  <!-- Luxury Section -->
  <section id="luxury" class="gift-section mt-6 hidden opacity-0 transition-all duration-500">
    <h3 class="text-sm font-semibold text-gray-800 mb-3">Luxury Gifts</h3>
    <div class="grid grid-cols-2 gap-3">
      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <span class="absolute top-2 right-3 text-xs font-semibold text-[#E2B129] bg-[#FFF8E1] px-2 py-0.5 rounded-full shadow-sm">â‚¦40,000</span>
        <img src="images/luxury.jpeg" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">VIP SPA TREAT</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Eko Suites</p>
        <button class="w-full bg-[#FFF8E1] text-[#E2B129] text-[11px] font-semibold py-1 rounded-full border border-[#E2B129]/30">Buy Now</button>
      </div>
    </div>
  </section>
  
  <!-- Spa Section -->
  <section id="spa" class="gift-section mt-6 hidden opacity-0 transition-all duration-500">
    <h3 class="text-sm font-semibold text-gray-800 mb-3">Spa Packages</h3>
    <div class="grid grid-cols-2 gap-3">
      <div class="relative bg-white rounded-2xl shadow-lg p-3 border border-gray-100 hover:shadow-xl transition-all">
        <span class="absolute top-2 right-3 text-xs font-semibold text-[#E2B129] bg-[#FFF8E1] px-2 py-0.5 rounded-full shadow-sm">â‚¦30,000</span>
        <img src="images/spa.jpeg" class="w-full h-24 object-cover rounded-xl mb-2">
        <h4 class="text-xs font-bold text-gray-800">SPA RELAX</h4>
        <p class="text-[11px] text-gray-500 mb-2">From Serenity Spa</p>
        <button class="w-full bg-[#FFF8E1] text-[#E2B129] text-[11px] font-semibold py-1 rounded-full border border-[#E2B129]/30">Buy Now</button>
      </div>
    </div>
  </section>
  <script src="https://unpkg.com/lucide@latest"></script>
<script>
  lucide.createIcons();

  const buttons = document.querySelectorAll('.category-btn');
  const sections = document.querySelectorAll('.gift-section');

  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      // Remove active styles from all buttons
      buttons.forEach(b => b.classList.remove('bg-[#FFF8E1]', 'text-[#E2B129]', 'border-[#E2B129]/30'));
      buttons.forEach(b => b.classList.add('bg-white', 'text-gray-600', 'border-gray-200'));

      // Apply active style
      btn.classList.add('bg-[#FFF8E1]', 'text-[#E2B129]', 'border-[#E2B129]/30');

      // Hide all sections
      sections.forEach(sec => {
        sec.classList.add('hidden');
        sec.classList.remove('opacity-100', 'visible');
      });

      // Show selected section with fade animation
      const target = document.getElementById(btn.dataset.target);
      target.classList.remove('hidden');
      setTimeout(() => target.classList.add('opacity-100', 'visible'), 50);
    });
  });
</script>

      </main>
  
    </div>
    <div id="searchPage" class="fixed inset-0 hidden bg-white dark:bg-[#0b0b0b] z-50 flex flex-col transform translate-y-full transition-transform duration-300 ease-out">
  
      <!-- Header -->
      <div class="flex items-center space-x-3 p-4 border-b border-gray-100 dark:border-gray-800">
        <button id="closeSearchBtn" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition">
          <i data-lucide="arrow-left" class="w-5 h-5 text-gray-600 dark:text-gray-300"></i>
        </button>
        <div class="flex items-center flex-1 space-x-2 bg-gray-100 dark:bg-gray-800 rounded-xl px-3 py-2">
          <i data-lucide="search" class="w-4 h-4 text-gray-400 dark:text-gray-500"></i>
          <input id="searchInput" 
            type="text" 
            placeholder="Search here..." 
            class="bg-transparent outline-none w-full text-gray-700 dark:text-gray-200 text-sm placeholder:text-gray-400"
          >
        </div>
      </div>
    
      <!-- Suggestions -->
      <div class="p-5 flex-1 overflow-y-auto animate-fadeIn">
        <p class="text-xs text-gray-400 uppercase mb-3">Try searching for</p>
        <div class="flex flex-wrap gap-2">
          <button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition">Tech Gadgets</button>
          <button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition">Healthy Meals</button>
          <button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition">Fitness</button>
          <button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition">Trending</button>
        </div>
      </div>
    </div>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
 <!-- MODERN BOTTOM NAVIGATION -->
<nav class="fixed bottom-4 left-4 right-4 bg-white/90 backdrop-blur-lg rounded-[2.5rem] shadow-xl flex justify-around py-2 px-4 z-50 border border-yellow-100">
  <!-- Home  -->
 
  <button 
  class="nav-item flex flex-col items-center justify-center text-gray-400 hover:text-yellow-500 transition-all duration-300"
  onclick="window.location.href='usersapp.html'">
  <i data-lucide="home" class="w-5 h-5"></i>
  <span  class="text-[10px] mt-1 font-semibold">Home</span>
</button>

<!-- Mobile Search Button in Bottom Nav -->
<button id="openMobileSearch" class="nav-item flex flex-col items-center justify-center text-gray-400 hover:text-yellow-500 transition-all duration-300">
  <i data-lucide="search" class="w-5 h-5"></i>
  <span class="text-[10px] mt-1 font-semibold">Search</span>
</button>

<!-- Full-Screen Mobile Search Page -->
<div id="mobileSearchPage" class="fixed inset-0 hidden bg-white dark:bg-[#0b0b0b] z-50 flex flex-col transform translate-y-full transition-transform duration-300 ease-out">

  <!-- Header -->
  <div class="flex items-center space-x-3 p-4 border-b border-gray-100 dark:border-gray-800">
    <button id="closeMobileSearch" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition">
      <i data-lucide="arrow-left" class="w-5 h-5 text-gray-600 dark:text-gray-300"></i>
    </button>
    <div class="flex items-center flex-1 space-x-2 bg-gray-100 dark:bg-gray-800 rounded-xl px-3 py-2">
      <i data-lucide="search" class="w-4 h-4 text-gray-400 dark:text-gray-500"></i>
      <input id="mobileSearchInput" 
        type="text" 
        placeholder="Search here..." 
        class="bg-transparent outline-none w-full text-gray-700 dark:text-gray-200 text-sm placeholder:text-gray-400"
      >
    </div>
  </div>

  <!-- Suggestions -->
  <div class="p-5 flex-1 overflow-y-auto animate-fadeIn">
    <p class="text-xs text-gray-400 uppercase mb-3">Try searching for</p>
    <div class="flex flex-wrap gap-2">
      <button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition">Tech Gadgets</button>
      <button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition">Healthy Meals</button>
      <button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition">Fitness</button>
      <button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition">Trending</button>
      <button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-[#FFF8E1] hover:text-[#E2B129] transition">Latest Offers</button>
    </div>
  </div>
</div>


<script>
  lucide.createIcons();

  const openMobileBtn = document.getElementById("openMobileSearch");
  const mobileSearchPage = document.getElementById("mobileSearchPage");
  const mobileSearchInput = document.getElementById("mobileSearchInput");
  const closeMobileBtn = document.getElementById("closeMobileSearch");

  // Open full-screen search
  openMobileBtn.addEventListener("click", () => {
    mobileSearchPage.classList.remove("hidden");
    setTimeout(() => {
      mobileSearchPage.classList.remove("translate-y-full"); // slide up
      mobileSearchInput.focus(); // auto-focus
    }, 10);
  });

  // Close search
  closeMobileBtn.addEventListener("click", () => {
    mobileSearchPage.classList.add("translate-y-full");
    setTimeout(() => mobileSearchPage.classList.add("hidden"), 300);
  });

  // Optional: tap outside to close
  mobileSearchPage.addEventListener("click", (e) => {
    if (e.target === mobileSearchPage) {
      mobileSearchPage.classList.add("translate-y-full");
      setTimeout(() => mobileSearchPage.classList.add("hidden"), 300);
    }
  });
</script>

  <!-- Gifts (Active)-->
  <button class="nav-item active flex flex-col items-center justify-center text-yellow-500 transition-all duration-300">
    <i data-lucide="gift" class="w-5 h-5"></i>
    <span class="text-[10px] mt-1 font-semibold">Gifts</span>
  </button>

  <!-- Profile -->
  <button class="nav-item flex flex-col items-center justify-center text-gray-400 hover:text-yellow-500 transition-all duration-300">
    <i data-lucide="user" class="w-5 h-5"></i>
    <span class="text-[10px] mt-1 font-semibold">Profile</span>
  </button>
</nav>

<script>
  // Lucide icons init
  lucide.createIcons();

  // Toggle active state and icon fill
  const buttons = document.querySelectorAll(".nav-item");
  buttons.forEach(btn => {
    btn.addEventListener("click", () => {
      buttons.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      updateIcons();
    });
  });

  function updateIcons() {
    buttons.forEach(btn => {
      const icon = btn.querySelector("i");
      const name = icon.getAttribute("data-lucide");
      icon.outerHTML = `<i data-lucide="${name}" class="w-5 h-5 ${btn.classList.contains('active') ? 'fill-yellow-500 text-yellow-500' : ''}"></i>`;
    });
    lucide.createIcons();
  }
</script>


  </div>
  
  
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const messages = [
      "Ready to share a little joy today?",
      "Make someone smile with a thoughtful gift!",
      "Find the perfect surprise for your loved ones!",
      "Bring happiness with a simple gesture!"
    ];
  
    const messageElement = document.getElementById("joymMessage");
    if (!messageElement) return; // stop if element not found
  
    let index = 0;
  
    setInterval(() => {
      messageElement.classList.add("opacity-0");
  
      setTimeout(() => {
        index = (index + 1) % messages.length;
        messageElement.textContent = messages[index];
        messageElement.classList.remove("opacity-0");
      }, 500);
    }, 4000);
  });
  
  // initialize lucide icons safely
  document.addEventListener("DOMContentLoaded", () => lucide.createIcons());
  </script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const messages = [
          "Ready to share a little joy today?",
          "Make someone smile with a thoughtful gift!",
          "Find the perfect surprise for your loved ones!",
          "Bring happiness with a simple gesture!"
        ];
      
        const messageElement = document.getElementById("joyMessage");
        if (!messageElement) return; // stop if element not found
      
        let index = 0;
      
        setInterval(() => {
          messageElement.classList.add("opacity-0");
      
          setTimeout(() => {
            index = (index + 1) % messages.length;
            messageElement.textContent = messages[index];
            messageElement.classList.remove("opacity-0");
          }, 500);
        }, 4000);
      });
      
      // initialize lucide icons safely
      document.addEventListener("DOMContentLoaded", () => lucide.createIcons());
      </script>

<script src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.6/bundled/lenis.min.js"></script>
<script>
  const lenis = new Lenis({ smoothWheel: true });
  function raf(time) {
    lenis.raf(time);
    requestAnimationFrame(raf);
  }
  requestAnimationFrame(raf);
</script>
<script>
  // Wait until everything loads
  window.addEventListener("load", () => {
    const preloader = document.getElementById("preloader");
    const content = document.getElementById("page-content");
    preloader.classList.add("fade-out");
    setTimeout(() => {
      preloader.style.display = "none";
      content.classList.remove("hidden");
    }, 800); // Match fade-out duration
  });
</script>
   

      <!-- Optional: Poppins font for matching logo text 
      <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet">
    </head>
   <!-- OFFLINE SECTION -->
      <section id="offline-section" role="status" aria-live="polite">
        <div class="offline-icon" aria-hidden="true">
          <!-- Inline "wifi off" SVG styled to use the share/gold color 
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" style="color: #E2B129;">
            <path d="M2 2l20 20" /> <!-- cross line
            <path d="M8.53 8.53a8.5 8.5 0 0 1 11.94 0" opacity="0.9"/>
            <path d="M6.11 6.11a12 12 0 0 1 16.97 0" opacity="0.6"/>
            <path d="M11 15a3 3 0 1 1-4.997-1.43" opacity="0.8"/>
            <circle cx="12" cy="17" r="1.2" />
          </svg>
        </div>
    
        <h1 class="offline-title">No Internet</h1>
        <p class="offline-desc">You appear to be offline. Some features may not work. Check your network connection or try again.</p>
        <div>
          <button class="offline-btn" id="offline-retry">Retry</button>
        </div>
      </section>
    
      <script>
        (function(){
          const offlineSection = document.getElementById('offline-section');
          const retryBtn = document.getElementById('offline-retry');
    
          // Show or hide overlay using display for reliability
          function showOffline(){
            offlineSection.style.display = 'flex';
          }
          function hideOffline(){
            offlineSection.style.display = 'none';
          }
    
          // Check connection more robustly: navigator.onLine plus a lightweight fetch to confirm if possible.
          // fetchCheck is used only when navigator.onLine says online but you may still be behind captive portal.
          async function fetchCheck(){
            try {
              // a small, CORS-friendly request â€” using a favicon from a reliable host that allows GET
              // If you prefer, change to your own server endpoint that returns 204 quickly.
              const res = await fetch('https://www.gstatic.com/generate_204', {method: 'GET', cache: 'no-store', mode: 'no-cors'});
              // If fetch succeeds without throwing, assume online.
              return true;
            } catch (err) {
              return false;
            }
          }
    
          async function updateStatus(){
            // Quick path: offline reported by browser
            if (!navigator.onLine) {
              showOffline();
              return;
            }
    
            // If browser reports online, do a small fetch check to be safer (this won't block UI long)
            const ok = await fetchCheck();
            if (ok) hideOffline();
            else showOffline();
          }
    
          // Run after DOM ready
          window.addEventListener('DOMContentLoaded', () => {
            // Initial check
            updateStatus();
    
            // Listen to online/offline events and update
            window.addEventListener('online', updateStatus);
            window.addEventListener('offline', updateStatus);
    
            // Manual retry button to re-check immediately
            retryBtn.addEventListener('click', updateStatus);
          });
        })();
      </script>
  
    
</body>
</html>